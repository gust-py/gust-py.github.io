<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>PokéWeb MMO</title>
<style>
  body{margin:0;overflow:hidden;background:#111;color:#fff;font-family:sans-serif;}
  #gameCanvas{display:block;background:#0b0f13;}
  #inventory{position:absolute;top:10px;right:10px;background:rgba(0,0,0,0.6);padding:10px;border-radius:8px;}
  .item{width:32px;height:32px;margin:2px;display:inline-block;background-size:contain;background-repeat:no-repeat;}
</style>
</head>
<body>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<div id="inventory">
  <div class="item" id="pokeball"></div>
  <div class="item" id="greatball"></div>
  <div class="item" id="ultraball"></div>
  <div class="item" id="potion"></div>
</div>
<script>
// --- Configurações ---
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const TILE_SIZE = 64;
const MAP_WIDTH = 12;
const MAP_HEIGHT = 9;

const map = [
  [0,0,0,0,0,0,0,0,0,0,0,0],
  [0,1,1,1,0,0,0,1,1,1,1,0],
  [0,1,0,1,0,0,0,1,0,0,1,0],
  [0,1,0,1,1,1,1,1,0,0,1,0],
  [0,1,0,0,0,0,0,1,0,0,1,0],
  [0,1,1,1,1,0,0,1,1,1,1,0],
  [0,0,0,0,1,0,0,0,0,0,0,0],
  [0,1,1,0,1,1,1,0,1,1,1,0],
  [0,0,0,0,0,0,0,0,0,0,0,0],
];

const player = {x:5*TILE_SIZE, y:5*TILE_SIZE, sprite:null};

// NPCs / Pokémons aleatórios
let npcs = [
  {x:2*TILE_SIZE, y:2*TILE_SIZE, sprite:null, type:'pokemon'},
  {x:9*TILE_SIZE, y:6*TILE_SIZE, sprite:null, type:'trainer'},
];

// --- Carregar sprites da PokéAPI ---
function loadImage(url){ return new Promise(resolve=>{ const img=new Image(); img.src=url; img.onload=()=>resolve(img); }); }

async function loadSprites(){
  player.sprite = await loadImage('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/25.png'); // Pikachu
  npcs[0].sprite = await loadImage('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/1.png'); // Bulbasaur
  npcs[1].sprite = await loadImage('https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/trainers/black-white/1.png'); // treinador
  document.getElementById('pokeball').style.backgroundImage='url(https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/poke-ball.png)';
  document.getElementById('greatball').style.backgroundImage='url(https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/great-ball.png)';
  document.getElementById('ultraball').style.backgroundImage='url(https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/ultra-ball.png)';
  document.getElementById('potion').style.backgroundImage='url(https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/items/potion.png)';
}

// --- Movimento do jogador ---
const keys = {};
document.addEventListener('keydown', e=>keys[e.key]=true);
document.addEventListener('keyup', e=>keys[e.key]=false);

function movePlayer(){
  if(keys['ArrowUp'] && player.y-TILE_SIZE>=0) player.y -= TILE_SIZE;
  if(keys['ArrowDown'] && player.y+TILE_SIZE<=canvas.height-TILE_SIZE) player.y += TILE_SIZE;
  if(keys['ArrowLeft'] && player.x-TILE_SIZE>=0) player.x -= TILE_SIZE;
  if(keys['ArrowRight'] && player.x+TILE_SIZE<=canvas.width-TILE_SIZE) player.x += TILE_SIZE;
}

// --- Movimento simples dos NPCs ---
function moveNPCs(){
  for(let npc of npcs){
    const dir=Math.floor(Math.random()*4);
    switch(dir){
      case 0: if(npc.y-TILE_SIZE>=0) npc.y -= TILE_SIZE; break;
      case 1: if(npc.y+TILE_SIZE<=canvas.height-TILE_SIZE) npc.y += TILE_SIZE; break;
      case 2: if(npc.x-TILE_SIZE>=0) npc.x -= TILE_SIZE; break;
      case 3: if(npc.x+TILE_SIZE<=canvas.width-TILE_SIZE) npc.x += TILE_SIZE; break;
    }
  }
}

// --- Desenhar mapa ---
function drawMap(){
  for(let y=0;y<MAP_HEIGHT;y++){
    for(let x=0;x<MAP_WIDTH;x++){
      if(map[y][x]===0) ctx.fillStyle='#222';
      else ctx.fillStyle='#444';
      ctx.fillRect(x*TILE_SIZE, y*TILE_SIZE, TILE_SIZE, TILE_SIZE);
    }
  }
}

// --- Desenhar personagens ---
function drawEntities(){
  ctx.drawImage(player.sprite, player.x, player.y, TILE_SIZE, TILE_SIZE);
  for(let npc of npcs){
    ctx.drawImage(npc.sprite, npc.x, npc.y, TILE_SIZE, TILE_SIZE);
  }
}

// --- Game loop ---
async function gameLoop(){
  movePlayer();
  moveNPCs();
  drawMap();
  drawEntities();
  requestAnimationFrame(gameLoop);
}

// --- Start ---
loadSprites().then(()=>{ gameLoop(); });
</script>
</body>
</html>
